<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Demo</title>
    <script src="jquery-1.8.3.js"></script>

<script>

function getLinks() {
    alert("getting links");
    $.ajax({ url: "https://api-ssl.bitly.com/v3/user/link_history",
             dataType: 'json',
             data: { access_token: $('input[name="token"]').val(), limit: 10 },
             success: gotLinks
           }
    )
}

function gotLinks(data, textStatus, jqXHR) {
    var innerHTML = "<br>\n";
    var link_history = data.data.link_history;
    for (var i=0; i<link_history.length; i++) {
        link = link_history[i];
        innerHTML += link.long_url + "\n<br>";
    }
    console.log("innerHTML='" + innerHTML + "'");
    $('#output')[0].innerHTML = innerHTML;
}

$(document).ready(function(){
    $('input[name="start"]').click(getLinks);
});

</script>
<style>
.rounded {
    border: 2px solid grey;
    border-radius: 15px;
    width: 50%;
    margin-left: auto;
	margin-right: auto;
	padding: 7px;
	color:#4B5BDB;
}
.rounded2 {
    border: 2px solid grey;
    border-radius: 15px;
    width: 25%;
    margin-left: auto;
	margin-right: auto;
	padding: 7px;
	font: 16pt;
	color:#4B5BDB;
}
.rounded3 {
    border: 2px solid grey;
    border-radius: 15px;
    width: 65%;
    margin-left: auto;
	margin-right: auto;
	padding: 7px;
	font: 16pt;
	color:#4B5BDB;
}

.tr_center{
    margin-left: auto;
	margin-right: auto;
	position:relative;
}

h3 {FONT-SIZE: 28pt; COLOR:#000000}
tr {FONT-SIZE: 12pt; COLOR:#4B5BDB}

.button{
    height:30px; 
    width:100px; 
    margin: -20px -50px; 
    position:relative;
    top:50%; 
    left:50%;
    padding: 30px;
    font: 12pt;
}

#output{
    font: 12pt;
    padding: 7px;

}

body {background-image:url("images/bitly-puffer-fish.png");
//background-color:#4B5BDB;
table {color:#4B5BDB;}
}
</style>
  </head>
  <body>
    <h3 ALIGN="CENTER">Get notifications for clicks on your bitly links!</h3>
    <div class="rounded"> 
        <table>
            <tr><td>Generate your access token.</td></tr>
            <tr><td>Login:</td><td><input name="login" type="text"></input></td></tr>
            <tr><td>Password:</td><td><input name="password" type="text"></input></td></tr>
            <div><tr><td><button type="button">Generate Token</button></td></tr></div>
        </table>
    </div><br>

<div class="rounded3"> 
        <table>
     <tr><td>Or run this command in terminal:</td></tr>
            <tr><td>curl -u "username:password" -X POST "https://api-ssl.bitly.com/oauth/access_token"</td></tr>
        </table>
    </div><br>
    <div class="rounded2"> 
        <table>

            <tr><td>Token: <input name="token" type="text"></input></td></tr>
        </table>
    </div>
    <div class="button">
        <input value="Start" name="start" type="button"/>
    </div>
    <div id="output">
    </div>
  </body>
</html>
